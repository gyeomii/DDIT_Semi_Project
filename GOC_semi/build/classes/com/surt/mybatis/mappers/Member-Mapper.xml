<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Member-Mapper">
	
	<select id="selectMemberById" parameterType="str" resultType="member">
		select
		*
		from member
		where user_id = #{user_id}
	</select>
	
	<select id="selectMemberByNickname" parameterType="str" resultType="member">
		select
		*
		from member
		where nickname = #{nickname}
	</select>
	
	<update id="insertMember" parameterType="member">
		<selectKey order="BEFORE" keyProperty="user_idx" resultType="int">
				SELECT USER_IDX_SEQ.NEXTVAL FROM DUAL
		</selectKey>
		insert into 
		member(user_idx, user_id, name, email, password, birth, address, nickname, gender, phone, regist_date, agree_tos)
		values(#{user_idx}, #{user_id}, #{name}, #{email}, #{password},
				 #{birth}, #{address}, #{nickname}, #{gender}, #{phone},
				  #{regist_date}, #{agree_tos})
	</update>
	
</mapper>
